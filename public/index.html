<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vista Cliente</title>
    <link rel="stylesheet" href="./css/styles-usuario.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
  </head>
  <body>
    <!-- üîπ Encabezado -->
    <!-- --------------------------- HEADER ACTUALIZADO --------------------------- -->
    <header class="bg-vino text-white py-3">
      <div
        class="container d-flex flex-wrap justify-content-between align-items-center"
      >
        <div class="logo">
          <a href="javascript:location.reload()">
            <img
              id="logo-image"
              src="./img/logo_empresa.jpg"
              alt="Logo Empresa"
              class="img-fluid"
              style="max-height: 60px"
            />
          </a>
        </div>

        <div class="search-bar d-flex flex-grow-1 mx-3">
          <input
            type="text"
            id="busqueda-productos"
            class="form-control"
            placeholder="Buscar productos..."
          />
          <button class="btn btn-light ms-2">
            <i class="fas fa-search"></i>
          </button>
        </div>

        <!-- BOTONES DE USUARIO NO LOGUEADO -->
        <div id="guest-buttons" class="d-flex">
          <button
            class="btn btn-light me-2"
            data-bs-toggle="modal"
            data-bs-target="#loginModal"
          >
            <i class="fas fa-sign-in-alt"></i> Iniciar Sesi√≥n
          </button>
          <button
            class="btn btn-light"
            data-bs-toggle="modal"
            data-bs-target="#signupModal"
          >
            <i class="fas fa-user-plus"></i> Registrarse
          </button>
        </div>

        <!-- BOTONES DE USUARIO LOGUEADO -->
        <div id="user-buttons" class="d-none align-items-center">
          <span class="me-3">
            <i class="fas fa-user-circle"></i>
            <span id="client-name">Cliente</span>
          </span>
          <button
            class="btn btn-outline-light ms-2"
            data-bs-toggle="offcanvas"
            data-bs-target="#carritoSidebar"
            id="carrito-btn"
            data-bs-placement="bottom"
            title="Resumen del carrito"
          >
            <i class="fas fa-shopping-cart"></i>
            <span id="carrito-count" class="badge bg-light text-dark ms-1"
              >0</span
            >
          </button>
          <button id="logout-cliente-btn" class="btn btn-outline-light">
            <i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n
          </button>
        </div>
      </div>
    </header>
    <!-- Offcanvas del carrito -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="carritoSidebar">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title">
          <i class="fa-solid fa-cart-shopping"></i> Tu carrito
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
        ></button>
      </div>
      <div class="offcanvas-body" id="carrito-contenido">
        <!-- Aqu√≠ se insertar√°n din√°micamente los productos del carrito -->
      </div>
    </div>
    <div id="ticket-visual" class="d-none p-3 shadow-lg rounded bg-white text-dark" style="max-width: 300px; margin: 0 auto; font-family: monospace;"></div>
    <!-- Promociones -->
    <section id="promotions">
      <div id="promo-carousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner" id="promo-slider">
          <!-- Aqu√≠ se insertar√°n din√°micamente las promociones -->
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#promo-carousel"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#promo-carousel"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </section>

    <!--Sugerencias-->
    <!-- üî∏ SUGERENCIAS - SOLO SI EL CLIENTE EST√Å ACTIVO -->
    <div id="seccion-sugerencias" class="d-none">
      <div id="titulo-recomendacion">
        <h2>‚ú® Nuestra recomendaci√≥n del d√≠a para ti ‚ú®</h2>
      </div>

      <div id="tarjeta-sugerencia" class="tarjeta-horizontal">
        <img id="imagen-pan" src="" alt="Pan recomendado" />
        <div class="contenido-pan">
          <h3 id="nombre-pan">Nombre del pan</h3>
          <button id="btn-carrito">A√±adir al carrito</button>
        </div>
      </div>
    </div>

    <!-- Categor√≠as -->
    <section id="categories">
      <h2>Categor√≠as</h2>
      <h5>Estamos trabajando üèóüößüë∑‚Äç‚ôÇÔ∏è</h5>
      <div class="category-grid" id="category-buttons">
        <!-- Las categor√≠as se cargar√°n din√°micamente aqu√≠ -->
      </div>
      <div
        class="modal fade"
        id="modalDetallesProducto"
        tabindex="-1"
        aria-hidden="true"
      >
        <div
          class="modal-dialog modal-dialog-centered modal-lg animate__animated animate__fadeInUp"
        >
          <div class="modal-content rounded-4 shadow">
            <div class="modal-header bg-vino text-white">
              <h5 class="modal-title" id="modalNombreProducto"></h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body p-4">
              <img
                id="modalImagenProducto"
                class="img-fluid mb-3 rounded shadow-sm"
                alt=""
                style="max-height: 300px; object-fit: cover"
              />
              <p id="modalPrecioProducto" class="fw-bold fs-5 text-success"></p>
              <h6 class="mb-2">Ingredientes:</h6>
              <ul id="modalIngredientes" class="list-group small"></ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Productos -->
    <section id="products">
      <h2>Productos</h2>
      <div class="row" id="products-list">
        <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
      </div>
    </section>

    <!-- üîπ Modal de Iniciar Sesi√≥n -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-vino text-white">
            <h3 class="modal-title">Iniciar Sesi√≥n</h3>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <form id="login-form">
              <label for="login-email">Correo Electr√≥nico</label>
              <input
                type="email"
                id="login-email"
                class="form-control mb-3"
                placeholder="Ingresa tu correo"
                required
              />

              <label for="login-password">Contrase√±a</label>
              <input
                type="password"
                id="login-password"
                class="form-control mb-3"
                placeholder="Ingresa tu contrase√±a"
                required
              />

              <button type="submit" class="btn btn-vino w-100">Ingresar</button>
            </form>
          </div>
          <div class="modal-footer">
            <a
              href="#"
              data-bs-toggle="modal"
              data-bs-target="#forgotPasswordModal"
              >¬øOlvidaste tu contrase√±a?</a
            >
          </div>
        </div>
      </div>
    </div>

    <!-- üîπ Modal de Registro -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-vino text-white">
            <h3 class="modal-title">Registro de Cliente</h3>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <form id="signup-form">
              <!-- Secci√≥n 1: Datos Personales -->
              <h5 class="mb-3">Datos Personales</h5>
              <div class="mb-3">
                <label for="signup-name" class="form-label"
                  >Nombre Completo</label
                >
                <input
                  type="text"
                  id="signup-name"
                  class="form-control"
                  placeholder="Ingresa tu nombre completo"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signup-gender" class="form-label">G√©nero</label>
                <select id="signup-gender" class="form-select" required>
                  <option value="" disabled selected>
                    Selecciona tu g√©nero
                  </option>
                  <option value="masculino">Masculino</option>
                  <option value="femenino">Femenino</option>
                  <option value="otro">Otro</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="signup-birthdate" class="form-label"
                  >Fecha de Nacimiento</label
                >
                <input
                  type="date"
                  id="signup-birthdate"
                  class="form-control"
                  required
                />
              </div>

              <hr />

              <!-- Secci√≥n 2: Direcci√≥n -->
              <h5 class="mb-3">Direcci√≥n</h5>
              <div class="mb-3">
                <label for="signup-municipio" class="form-label"
                  >Municipio/Alcald√≠a</label
                >
                <input
                  type="text"
                  id="signup-municipio"
                  class="form-control"
                  placeholder="Ej. Cuauht√©moc"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signup-colonia" class="form-label">Colonia</label>
                <input
                  type="text"
                  id="signup-colonia"
                  class="form-control"
                  placeholder="Ej. Centro"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signup-codigo-postal" class="form-label"
                  >C√≥digo Postal</label
                >
                <input
                  type="number"
                  id="signup-codigo-postal"
                  class="form-control"
                  placeholder="Ej. 06000"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signup-address" class="form-label"
                  >Direcci√≥n Completa</label
                >
                <input
                  type="text"
                  id="signup-address"
                  class="form-control"
                  placeholder="Ej. Calle 123, Ciudad"
                  required
                />
              </div>

              <hr />

              <!-- Secci√≥n 3: Datos de Cuenta -->
              <h5 class="mb-3">Datos de Cuenta</h5>
              <div class="mb-3">
                <label for="signup-email" class="form-label"
                  >Correo Electr√≥nico</label
                >
                <input
                  type="email"
                  id="signup-email"
                  class="form-control"
                  placeholder="Ingresa tu correo"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signup-phone" class="form-label">Tel√©fono</label>
                <input
                  type="tel"
                  id="signup-phone"
                  class="form-control"
                  placeholder="Ej. 5555555555"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signup-password" class="form-label"
                  >Contrase√±a</label
                >
                <input
                  type="password"
                  id="signup-password"
                  class="form-control"
                  placeholder="Crea una contrase√±a"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signup-password-confirm" class="form-label"
                  >Confirmar Contrase√±a</label
                >
                <input
                  type="password"
                  id="signup-password-confirm"
                  class="form-control"
                  placeholder="Confirma tu contrase√±a"
                  required
                />
              </div>

              <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-user-plus me-2"></i> Registrarse
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- üîπ Modal de Recuperaci√≥n de Contrase√±a -->
    <div
      class="modal fade"
      id="forgotPasswordModal"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-vino text-white">
            <h5 class="modal-title">Recuperar Contrase√±a</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <form id="forgot-password-form">
              <label for="recovery-email">Correo Electr√≥nico</label>
              <input
                type="email"
                id="recovery-email"
                class="form-control mb-3"
                placeholder="Ingresa tu correo"
                required
              />

              <button type="submit" class="btn btn-vino w-100">
                Enviar enlace
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p id="footer-company-name"></p>
    </footer>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <script src="js/sugerencias.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script type="module" src="./js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Importa tinycolor2 desde un CDN -->
    <script src="https://cdn.jsdelivr.net/npm/tinycolor2@1.4.2/dist/tinycolor-min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <audio id="celebration-sound" preload="auto">
      <source src="./sounds/login-success.mp3" type="audio/mpeg" />
    </audio>
  </body>
</html>
