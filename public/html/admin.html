<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel de Administraci√≥n</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Toastify CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="../css/promotions-list-redesign.css" />
    <link rel="stylesheet" href="../css/products-list-redesign.css" />
    <link rel="stylesheet" href="../css/stylesAdmin.css" />
  </head>
  <body>
    <header class="admin-header">
      <img
        id="logo-image"
        src=""
        alt="Logo de la empresa"
        class="header-logo"
      />
      <h1 class="header-title">Panel de Administraci√≥n</h1>
      <div class="header-actions">
        <span id="employee-name" class="employee-name">Sesi√≥n: </span>
        <button
          id="logout-btn"
          class="btn btn-logout"
          aria-label="Cerrar sesi√≥n"
        >
          <i class="fas fa-sign-out-alt fa-2x"></i>
        </button>
      </div>
    </header>
    <!-- Navegaci√≥n de pesta√±as -->
    <div class="container mt-4">
      <ul class="nav nav-tabs" id="admin-tabs" role="tablist">
        <li class="nav-item">
          <button
            class="nav-link active"
            id="clients-tab"
            data-bs-toggle="tab"
            data-bs-target="#clients"
            type="button"
            role="tab"
            aria-controls="clients"
            aria-selected="true"
          >
            Clientes
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            id="employees-tab"
            data-bs-toggle="tab"
            data-bs-target="#employees"
            type="button"
            role="tab"
            aria-controls="employees"
            aria-selected="false"
          >
            Empleados
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            id="ingredients-tab"
            data-bs-toggle="tab"
            data-bs-target="#ingredients"
            type="button"
            role="tab"
            aria-controls="ingredients"
            aria-selected="false"
          >
            Ingrediente
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            id="products-tab"
            data-bs-toggle="tab"
            data-bs-target="#products"
            type="button"
            role="tab"
            aria-controls="products"
            aria-selected="false"
          >
            Productos
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            id="categorias-tab"
            data-bs-toggle="tab"
            data-bs-target="#categorias"
            type="button"
            role="tab"
            aria-controls="categorias"
            aria-selected="false"
          >
            Categorias
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            id="promotion-recommendations"
            data-bs-toggle="tab"
            data-bs-target="#promo-recommendations"
            type="button"
            role="tab"
            aria-controls="promo-recommendations"
            aria-selected="false"
          >
            Promociones
          </button>
        </li>
        <!-- Bot√≥n para inventario -->
        <li class="nav-item">
          <button
            class="nav-link"
            id="inventario-tab"
            data-bs-toggle="tab"
            data-bs-target="#inventario"
            type="button"
            role="tab"
            aria-controls="inventario"
            aria-selected="false"
          >
            Inventario
          </button>
        </li>
        <!-- Bot√≥n para estad√≠sticas -->
        <li class="nav-item">
          <button
            class="nav-link"
            id="sales-stats-tab"
            data-bs-toggle="tab"
            data-bs-target="#sales-stats-content"
            type="button"
            role="tab"
            aria-controls="sales-stats-content"
            aria-selected="false"
          >
            Estad√≠sticas
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            id="settings-tab"
            data-bs-toggle="tab"
            data-bs-target="#settings"
            type="button"
            role="tab"
            aria-controls="settings"
            aria-selected="false"
          >
            Configuraciones
          </button>
        </li>
      </ul>

      <div class="tab-content" id="admin-tabs-content">
        <!-- Clientes -->
        <div
          class="tab-pane fade show active"
          id="clients"
          role="tabpanel"
          aria-labelledby="clients-tab"
        >
          <h2>Gesti√≥n de Clientes</h2>
          <h2>Estamos trabajando üèóüößüë∑‚Äç‚ôÇÔ∏è</h2>
          <button class="btn btn-primary mb-3">Agregar Cliente</button>
          <span class="text-muted small"
            >Selecciona un cliente para ver acciones</span
          >
          <table class="table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Email</th>
                <th>Tel√©fono</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Juan P√©rez</td>
                <td>juan@example.com</td>
                <td>555-1234</td>
                <td>
                  <button class="btn btn-sm btn-warning">Editar</button>
                  <button class="btn btn-sm btn-danger">Eliminar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Empleados -->
        <div
          class="tab-pane fade"
          id="employees"
          role="tabpanel"
          aria-labelledby="employees-tab"
        >
          <h2>Gesti√≥n de Empleados</h2>
          <button class="btn btn-primary mb-3" id="btn-agregar-empleado">
            <i class="fas fa-plus-circle me-1"></i>Agregar Empleado
          </button>
          <!-- Modal para Agregar/Editar Empleado -->
          <div
            class="modal fade"
            id="empleadoModal"
            tabindex="-1"
            aria-labelledby="empleadoModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="empleadoModalLabel">
                    Agregar Empleado
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <!-- Formulario de empleado -->
                  <form id="form-empleado">
                    <div class="mb-3">
                      <label for="empleado-nombre">Nombre</label>
                      <input
                        type="text"
                        class="form-control"
                        id="empleado-nombre"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="empleado-email">Email</label>
                      <input
                        type="email"
                        class="form-control"
                        id="empleado-email"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="empleado-telefono">Tel√©fono</label>
                      <input
                        type="text"
                        class="form-control"
                        id="empleado-telefono"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="empleado-genero">G√©nero</label>
                      <select class="form-control" id="empleado-genero">
                        <option value="Masculino">Masculino</option>
                        <option value="Femenino">Femenino</option>
                        <option value="Otro">Otro</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label for="empleado-fecha">Fecha de Nacimiento</label>
                      <input
                        type="date"
                        class="form-control"
                        id="empleado-fecha"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="empleado-puesto">Puesto</label>
                      <select class="form-control" id="empleado-puesto">
                        <option value="cajero">Cajero</option>
                        <option value="empacador">Empacador</option>
                        <option value="admin">Administrador</option>
                      </select>
                    </div>
                    <button type="submit" class="btn btn-success">
                      Guardar Empleado
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Filtros Empleados -->
          <div class="d-flex flex-wrap align-items-end gap-3 mb-3">
            <!-- Buscar por Nombre -->
            <div class="flex-fill">
              <label for="buscarEmpleado" class="form-label">
                <i class="fas fa-search me-1"></i> Buscar
              </label>
              <input
                type="text"
                id="buscarEmpleado"
                class="form-control"
                placeholder="Ej. Juan P√©rez..."
              />
            </div>

            <!-- Filtro por Puesto -->
            <div class="flex-fill">
              <label for="filtroPuesto" class="form-label">
                <i class="fas fa-briefcase me-1"></i> Puesto
              </label>
              <select id="filtroPuesto" class="form-select">
                <option value="">Todos</option>
                <option value="cajero">Cajero</option>
                <option value="empacador">Empacador</option>
                <option value="admin">Administrador</option>
              </select>
            </div>

            <!-- Filtro por Email -->
            <div class="flex-fill">
              <label for="filtroEmail" class="form-label">
                <i class="fas fa-envelope me-1"></i> Email
              </label>
              <input
                type="text"
                id="filtroEmail"
                class="form-control"
                placeholder="Buscar por Email"
              />
            </div>

            <!-- Filtro por Tel√©fono -->
            <div class="flex-fill">
              <label for="filtroTelefono" class="form-label">
                <i class="fas fa-phone-alt me-1"></i> Tel√©fono
              </label>
              <input
                type="text"
                id="filtroTelefono"
                class="form-control"
                placeholder="Buscar por Tel√©fono"
              />
            </div>

            <!-- Ordenar por Nombre -->
            <div class="flex-fill">
              <label for="ordenarNombreEmpleado" class="form-label">
                <i class="fas fa-sort-alpha-down me-1"></i> Nombre
              </label>
              <select id="ordenarNombreEmpleado" class="form-select">
                <option value="az">A - Z</option>
                <option value="za">Z - A</option>
              </select>
            </div>

            <!-- Bot√≥n limpiar filtros -->
            <div>
              <button
                id="btn-limpiar-filtros-em"
                class="btn btn-outline-secondary disabled"
                disabled
              >
                <i class="fas fa-eraser me-1"></i> Limpiar Filtros
              </button>
            </div>
          </div>

          <!-- Badges de Filtros Activos -->
          <div id="filtros-activos-em" class="mb-3 d-none">
            <span class="me-2">Filtros activos:</span>
            <span
              id="badge-nombre-empleados"
              class="badge rounded-pill bg-secondary d-none"
            >
              Nombre: <span class="fw-bold"></span>
            </span>
            <span
              id="badge-orden-empleados"
              class="badge rounded-pill bg-secondary d-none"
            >
              Orden: <span class="fw-bold"></span>
            </span>
            <span
              id="badge-puesto-empleados"
              class="badge rounded-pill bg-secondary d-none"
            >
              Puesto: <span class="fw-bold"></span>
            </span>
            <span
              id="badge-email-empleados"
              class="badge rounded-pill bg-secondary d-none"
            >
              Email: <span class="fw-bold"></span>
            </span>
            <span
              id="badge-telefono-empleados"
              class="badge rounded-pill bg-secondary d-none"
            >
              Tel√©fono: <span class="fw-bold"></span>
            </span>
          </div>

          <!-- Contenedor para los botones de eliminar y editar cantidad -->
          <div class="button-container">
            <!-- Bot√≥n de eliminar (bote de basura) -->
            <div id="delete-employee-btn" class="button-delete">
              <i class="fa-solid fa-trash"></i>
            </div>
            <!-- Bot√≥n de actualizar cantidad (l√°piz) -->
            <div id="edit-employee-btn" class="button-edit">
              <i class="fa-regular fa-pen-to-square"></i>
            </div>
          </div>
          <span class="text-muted small"
            >Selecciona un empelado para ver acciones</span
          >
          <!-- Tabla de Empleados -->
          <div class="table-responsive">
            <table
              id="tabla-empleados"
              class="table table-hover table-borderless align-middle text-center mb-0"
            >
              <thead class="table-card-title">
                <tr>
                  <th>Nombre</th>
                  <th>Fecha Nacimiento</th>
                  <th>Puesto</th>
                  <th>Email</th>
                  <th>Tel√©fono</th>
                  <th>Registrado por</th>
                  <th>Fecha Registro</th>
                </tr>
              </thead>
              <tbody id="tabla-empleados-content">
                <!-- JS renderiza aqu√≠ -->
              </tbody>
            </table>
          </div>
          <!-- Modal de Confirmaci√≥n de Eliminaci√≥n -->
          <div
            class="modal fade"
            id="deleteEmpleadoModal"
            tabindex="-1"
            aria-labelledby="deleteEmpleadoModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="deleteEmpleadoModalLabel">
                    Confirmar Eliminaci√≥n
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  ‚ö†Ô∏è ¬øEst√°s seguro de que deseas eliminar este empleado? Esta
                  acci√≥n es irreversible.
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Cancelar
                  </button>
                  <button
                    type="button"
                    class="btn btn-danger"
                    id="confirm-delete-btn-empleado"
                  >
                    Eliminar
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Gesti√≥n de Ingredientes -->
        <div
          class="tab-pane fade"
          id="ingredients"
          role="tabpanel"
          aria-labelledby="ingredients-tab"
        >
          <h2>Cat√°logo de Ingredientes</h2>
          <button class="btn btn-primary mb-3" id="btn-agregar-ingrediente">
            <i class="fas fa-plus-circle me-1"></i>Agregar Ingrediente
          </button>
          <!-- Modal para agregar o editar ingrediente -->
          <div
            class="modal fade"
            id="ingredientModal"
            tabindex="-1"
            aria-labelledby="ingredientModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="ingredientModalLabel">
                    Agregar Ingrediente
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <!-- Modal para agregar/editar ingrediente -->
                <div class="modal-body">
                  <form id="ingredient-form">
                    <div class="form-section">
                      <label for="ingredient-name"
                        >Nombre del Ingrediente:</label
                      >
                      <input
                        type="text"
                        id="ingredient-name"
                        class="form-control"
                        placeholder="Nombre del Ingrediente"
                        required
                      />
                    </div>
                    <div class="form-section">
                      <label for="ingredient-measure">Tipo de Medida:</label>
                      <select
                        id="ingredient-measure"
                        class="form-control"
                        required
                      >
                        <option value="pz">Piezas</option>
                        <option value="kg">Kilogramos</option>
                        <option value="gr">Gramos</option>
                        <option value="lt">Litros</option>
                        <option value="ml">Mililitros</option>
                        <option value="otra">Otra</option>
                      </select>
                    </div>
                    <div class="form-section">
                      <label for="ingredient-stock">Cantidad:</label>
                      <input
                        type="number"
                        id="ingredient-stock"
                        class="form-control"
                        placeholder="Cantidad disponible"
                        min="0"
                        required
                      />
                    </div>
                    <!-- Radio Buttons para elegir Precio Unitario o Precio Total -->
                    <div class="form-section">
                      <label for="price-selection"
                        >Selecciona el tipo de precio:</label
                      >
                      <div>
                        <input
                          type="radio"
                          id="price-unit"
                          name="price-type"
                          value="unitario"
                          checked
                        />
                        Precio Unitario
                        <input
                          type="radio"
                          id="price-total"
                          name="price-type"
                          value="total"
                        />
                        Precio Total
                      </div>
                    </div>
                    <!-- Precio Unitario Inputs -->
                    <div id="unitario-fields" style="display: block">
                      <label for="ingredient-price">Precio Unitario</label>
                      <input
                        type="number"
                        id="ingredient-price"
                        class="form-control"
                        step="0.01"
                        min="0"
                      />

                      <label for="cantidad-unitario">Cantidad Unitario</label>
                      <input
                        type="number"
                        id="cantidad-unitario"
                        class="form-control"
                      />

                      <label for="medida-unitario">Medida</label>
                      <select id="medida-unitario" class="form-control">
                        <option value="pz">Piezas</option>
                        <option value="kg">Kilogramos</option>
                        <option value="gr">Gramos</option>
                        <option value="lt">Litros</option>
                        <option value="ml">Mililitros</option>
                        <option value="otra">Otra</option>
                      </select>

                      <span id="calculated-price-total"></span>
                      <!-- Display price total here -->
                    </div>

                    <!-- Precio Total Input -->
                    <div id="total-fields" style="display: none">
                      <label for="ingredient-price-total">Precio Total</label>
                      <input
                        type="number"
                        id="ingredient-price-total"
                        class="form-control"
                        step="0.01"
                        min="0"
                        value="0"
                      />
                    </div>
                    <button
                      type="submit"
                      class="btn btn-success"
                      id="save-ingredient-btn"
                    >
                      Guardar Ingrediente
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Filtros Ingredientes -->
          <div class="d-flex flex-wrap align-items-end gap-3 mb-3">
            <!-- Buscar por Nombre -->
            <div class="flex-fill">
              <label for="buscarIngrediente" class="form-label">
                <i class="fas fa-search me-1"></i> Buscar Nombre
              </label>
              <input
                type="text"
                id="buscarIngrediente"
                class="form-control"
                placeholder="Ej. Az√∫car, Harina..."
              />
            </div>

            <!-- Filtro por Fecha de Registro -->
            <div class="flex-fill">
              <label for="filtroFecha" class="form-label">
                <i class="fas fa-calendar me-1"></i> Fecha de Registro
              </label>
              <input type="date" id="filtroFecha" class="form-control" />
            </div>
            <!-- Ordenar por Nombre -->
            <div class="flex-fill">
              <label for="ordenarNombreIngrediente" class="form-label">
                <i class="fas fa-sort-alpha-down me-1"></i>Nombre
              </label>
              <select id="ordenarNombreIngrediente" class="form-select">
                <option value="az">A - Z</option>
                <option value="za">Z - A</option>
              </select>
            </div>

            <!-- Bot√≥n limpiar filtros -->
            <div>
              <button
                id="btn-limpiar-filtros-ing-1"
                class="btn btn-outline-secondary disabled"
                disabled
              >
                <i class="fas fa-eraser me-1"></i> Limpiar Filtros
              </button>
            </div>
          </div>

          <!-- Badges de filtros activos -->
          <div id="filtros-activos-ing" class="mb-3 d-none">
            <span class="me-2">Filtros activos:</span>
            <span
              id="badge-orden-ingrediente"
              class="badge rounded-pill bg-secondary d-none"
            >
              Orden: <span class="fw-bold"></span>
            </span>
            <span
              id="badge-nombre-ingrediente"
              class="badge rounded-pill bg-secondary d-none"
            >
              Nombre: <span class="fw-bold"></span>
            </span>
            <span
              id="badge-fecha-ingrediente"
              class="badge rounded-pill bg-secondary d-none"
            >
              Fecha Registro: <span class="fw-bold"></span>
            </span>
          </div>

          <!-- Contenedor para los botones de eliminar y editar cantidad -->
          <div class="button-container">
            <!-- Bot√≥n de eliminar (bote de basura) -->
            <div id="delete-btn" class="button-delete">
              <i class="fa-solid fa-trash"></i>
            </div>
            <!-- Bot√≥n de actualizar cantidad (l√°piz) -->
            <div id="edit-cuantity-modal-btn" class="button-edit">
              <i class="fa-regular fa-pen-to-square"></i>
            </div>
          </div>
          <span class="text-muted small"
            >Selecciona un ingrediente para ver acciones</span
          >
          <div class="table-responsive">
            <table
              id="ingredient-table"
              class="table table-hover table-borderless align-middle text-center mb-0"
            >
              <thead class="table-card-title">
                <tr>
                  <th>Nombre</th>
                  <th>Precio Total x Medida</th>
                  <!--    <th>Precio x Medida</th> -->
                  <th>Fecha Registro</th>
                </tr>
              </thead>
              <tbody id="ingredients-list">
                <!-- Lista din√°mica de ingredientes -->
              </tbody>
            </table>
          </div>
          <!-- Modal de Confirmaci√≥n de Eliminaci√≥n de ingrediente-->
          <div
            class="modal fade"
            id="deleteIngredientModal"
            tabindex="-1"
            aria-labelledby="deleteIngredientModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="deleteIngredientModalLabel">
                    Confirmar Eliminaci√≥n
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <p>
                    ‚ö†Ô∏è ¬øEst√°s seguro de que deseas eliminar este ingrediente?
                    Esta acci√≥n es irreversible.
                  </p>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Cancelar
                  </button>
                  <button
                    type="button"
                    class="btn btn-danger"
                    id="confirm-delete-btn"
                  >
                    Eliminar
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Gesti√≥n de Productos -->
        <div
          class="tab-pane fade"
          id="products"
          role="tabpanel"
          aria-labelledby="products-tab"
        >
          <!--Catalogo en lista-->
          <div class="container my-4">
            <h2>Cat√°logo de Productos</h2>
            <button class="btn btn-primary mb-3" id="btn-agregar-producto">
              <i class="fas fa-plus-circle me-1"></i> Agregar Producto
            </button>
            <!-- Filtros de Productos -->
            <div class="d-flex flex-wrap align-items-end gap-3 mb-3">
              <!-- Buscar por Nombre -->
              <div class="flex-fill">
                <label for="buscarProducto1" class="form-label">
                  <i class="fas fa-search me-1"></i> Buscar Nombre
                </label>
                <input
                  type="text"
                  id="buscarProducto1"
                  class="form-control input-busqueda"
                  placeholder="Ej. Pan, Donas..."
                />
              </div>

              <!-- Filtro por Categor√≠a -->
              <div class="flex-fill">
                <label for="filtroCategoria1" class="form-label">
                  <i class="fas fa-tags me-1"></i> Categor√≠a
                </label>
                <select id="filtroCategoria1" class="form-select">
                  <option value="">Todas</option>
                  <!-- Las categor√≠as se cargar√°n din√°micamente -->
                </select>
              </div>
              <!-- filtro orden precio -->
              <!--     <div class="flex-fill">
                <label for="ordenarProductosPrecio" class="form-label">
                  <i class="fa-solid fa-arrow-down-1-9"></i> Precio
                </label>
                <select id="ordenarProductosPrecio" class="form-select">
                  <option value="" disabled selected>
                    Selecciona el filtro
                  </option>
                  <option value="asc">Precio: Menor a Mayor</option>
                  <option value="desc">Precio: Mayor a Menor</option>
                </select>
              </div>-->
              <!-- filtro orden nombre -->
              <div class="flex-fill">
                <label for="ordenarProductos" class="form-label">
                  <i class="fas fa-sort-alpha-down me-1"></i> Nombre
                </label>
                <select id="ordenarProductos" class="form-select">
                  <option value="az">A - Z</option>
                  <option value="za">Z - A</option>
                </select>
              </div>

              <!-- Bot√≥n limpiar filtros -->
              <div>
                <button
                  id="btn-limpiar-filtros-prod"
                  class="btn btn-outline-secondary disabled btn-limpiar"
                  disabled
                >
                  <i class="fas fa-eraser me-1"></i> Limpiar Filtros
                </button>
              </div>
            </div>

            <!-- Badges de filtros activos -->
            <div id="filtros-activos-prod" class="mb-3 d-none">
              <span class="me-2">Filtros activos:</span>
              <span
                id="badge-nombre-prod"
                class="badge rounded-pill bg-secondary d-none"
              >
                Nombre: <span class="fw-bold"></span>
              </span>
              <span
                id="badge-categoria-prod"
                class="badge rounded-pill bg-secondary d-none"
              >
                Categoria: <span class="fw-bold"></span>
              </span>
              <!--    <span
                id="badge-orden-precio-prod"
                class="badge rounded-pill bg-secondary d-none"
              >
                Orden Precio: <span class="fw-bold"></span>
              </span>-->
              <span
                id="badge-nombre-orden-prod"
                class="badge rounded-pill bg-secondary d-none"
              >
                Orden Nombre: <span class="fw-bold"></span>
              </span>
            </div>

            <div class="row-product" id="product-catalog">
              <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
              <!-- El mensaje de no resultados se insertar√° autom√°ticamente cuando sea necesario -->
            </div>
          </div>

          <!-- üîç Modal Detalles de Producto -->
          <div
            class="modal fade"
            id="detalleProductoModal"
            tabindex="-1"
            aria-labelledby="detalleProductoLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content rounded-4 shadow-lg">
                <div class="modal-header rounded-top-4">
                  <h5 class="modal-title" id="detalleProductoLabel">
                    <i class="fas fa-cube me-2"></i>Detalles del Producto
                  </h5>
                  <button
                    type="button"
                    class="btn-close btn-close-white"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body p-4">
                  <div class="row g-4">
                    <!-- Imagen del Producto -->
                    <div class="col-md-4 text-center">
                      <img
                        id="detalle-producto-imagen"
                        src="#"
                        alt="Imagen del producto"
                        class="img-fluid rounded shadow-sm border border-light-subtle"
                      />
                    </div>

                    <!-- Informaci√≥n del Producto -->
                    <div class="col-md-8">
                      <h4
                        id="detalle-producto-nombre"
                        class="fw-bold mb-2"
                      ></h4>
                      <p class="mb-1">
                        <i class="fa-solid fa-layer-group text-muted"></i>
                        <strong>Categoria:</strong>
                        <span id="detalle-producto-categoria"></span>
                      </p>
                      <p class="mb-1">
                        <i class="fas fa-calendar-day me-2 text-muted"></i>
                        <strong>Fecha de Registro:</strong>
                        <span id="detalle-producto-fecha-registro"></span>
                      </p>
                      <p class="mb-1">
                        <i class="fas fa-dollar-sign me-2 text-muted"></i>
                        <strong>Precio:</strong>
                        <span id="detalle-producto-precio"></span>
                      </p>
                      <p class="mb-1">
                        <i class="fa-solid fa-cubes text-muted"></i>
                        <strong>Cantidad x Receta:</strong>
                        <span id="detalle-producto-stock"></span>
                      </p>
                      <p class="mb-1">
                        <i
                          class="fa-solid fa-magnifying-glass-dollar text-muted"
                        ></i>
                        <strong>Costo Unitario:</strong>
                        <span id="detalle-producto-costo-unitario"></span>
                      </p>
                      <p class="mb-0">
                        <i class="fas fa-boxes me-2 text-muted"></i>
                        <strong>Ingredientes:</strong>
                        <span id="detalle-producto-ingredientes"></span>
                      </p>
                    </div>
                  </div>
                </div>
                <div class="modal-footer justify-content-between px-4 py-3">
                  <button
                    class="btn btn-outline-danger"
                    id="btn-eliminar-producto"
                  >
                    <i class="fas fa-trash me-2"></i>Eliminar
                  </button>
                  <button
                    class="btn btn-outline-primary"
                    id="btn-editar-producto"
                  >
                    <i class="fas fa-pen-to-square me-2"></i>Editar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!--     <h2>Cat√°logo de Productos</h2>
          <button class="btn btn-primary mb-3" id="btn-agregar-producto">
            <i class="fas fa-plus-circle me-1"></i>Agregar Producto
          </button>-->
          <!-- Modal para agregar/editar producto -->
          <div
            class="modal fade"
            id="productModal"
            tabindex="-1"
            aria-labelledby="productModalLabel"
            aria-hidden="false"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="productModalLabel">
                    Agregar Producto
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    aria-label="Cerrar modal"
                    data-bs-dismiss="modal"
                  ></button>
                </div>
                <div class="modal-body">
                  <form id="product-form">
                    <div class="form-section">
                      <label for="product-name">Nombre del Producto:</label>
                      <input
                        type="text"
                        id="product-name"
                        class="form-control"
                        placeholder="Nombre del Producto"
                        required
                      />
                    </div>
                    <div class="form-section">
                      <label for="product-image">Imagen del Producto:</label>
                      <input
                        type="file"
                        id="product-image"
                        class="form-control"
                        accept="image/*"
                      />
                      <small class="text-muted"
                        >Formatos aceptados: JPG, PNG, GIF (M√°x. 2MB)</small
                      >
                      <div class="mt-2">
                        <img
                          id="product-image-preview"
                          src="#"
                          alt="Vista previa"
                          class="preview-image"
                        />
                      </div>
                    </div>
                    <div class="form-section">
                      <label for="product-category">Categor√≠a:</label>
                      <select
                        id="product-category"
                        class="form-control"
                        required
                      >
                        <!-- Las categor√≠as se llenar√°n aqu√≠ din√°micamente -->
                      </select>
                    </div>
                    <div class="form-section">
                      <label for="product-price">Precio:</label>
                      <input
                        type="number"
                        step="0.01"
                        min="0"
                        id="product-price"
                        class="form-control"
                        placeholder="Precio del Producto"
                        required
                      />
                    </div>
                    <div class="form-section">
                      <label for="product-stock">Cantidad x Receta:</label>
                      <input
                        type="number"
                        id="product-stock"
                        class="form-control"
                        placeholder="Cantidad x Receta"
                        required
                      />
                    </div>
                    <div class="form-section">
                      <label for="product-ingredients"
                        >Seleccionar Ingredientes:</label
                      >
                      <div id="product-ingredients">
                        <!-- Los ingredientes se generar√°n din√°micamente aqu√≠ -->
                      </div>
                    </div>
                    <!-- Lista de ingredientes seleccionados -->
                    <div
                      id="selected-ingredients-list"
                      class="form-section"
                    ></div>
                    <div class="text-end">
                      <button
                        type="button"
                        class="btn btn-secondary me-2"
                        data-bs-dismiss="modal"
                      >
                        Cancelar
                      </button>
                      <button
                        type="submit"
                        class="btn btn-success"
                        id="product-form-submit"
                      >
                        Guardar Producto
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal Confirmaci√≥n B√°sica (Eliminar Producto) -->
          <div
            class="modal fade"
            id="deleteProductModal"
            tabindex="-1"
            aria-labelledby="deleteProductModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="deleteProductModalLabel">
                    ¬øEst√°s seguro de eliminar este producto?
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <p>Est√°s por eliminar un producto. ¬øDeseas continuar?</p>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-danger"
                    id="confirmDeleteProduct"
                  >
                    Eliminar Producto
                  </button>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Cancelar
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal Confirmaci√≥n de Relaciones -->
          <div
            class="modal fade"
            id="deleteRelationsModal"
            tabindex="-1"
            aria-labelledby="deleteRelationsModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="deleteRelationsModalLabel">
                    ¬øEliminar tambi√©n las relaciones del producto?
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <p>
                    Este producto tiene relaciones con otros pedidos. ¬øDeseas
                    eliminar tambi√©n esas relaciones?
                  </p>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-danger"
                    id="confirmDeleteRelations"
                  >
                    Eliminar Relaciones y Producto
                  </button>
                  <button
                    type="button"
                    class="btn btn-warning"
                    id="confirmKeepRelations"
                  >
                    Mantener Relaciones (Actualizar a null)
                  </button>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Cancelar
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- Contenedor para los botones de eliminar y editar cantidad -->
          <!--          <div class="button-container">
             Bot√≥n de eliminar (bote de basura) 
            <div id="delete-product-btn" class="button-delete">
              <i class="fa-solid fa-trash"></i>
            </div>
            Bot√≥n de actualizar cantidad (l√°piz) 
            <div id="edit-product-btn" class="button-edit">
              <i class="fa-regular fa-pen-to-square"></i>
            </div>
          </div>
          <span class="text-muted small"
            >Selecciona un producto para ver acciones</span
          >
          <table class="table">
            <thead>
              <tr>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Categor√≠a</th>
                <th>Precio</th>
                <th>Cantidad</th>
                <th>Ingredientes, Cantidades y Precio</th>
                <th>Costo Unitario</th>
                <th>Costo Total</th>
                <th>Fecha Registro</th>
              </tr>
            </thead>
            <tbody id="products-list">
               Los productos se cargar√°n aqu√≠ din√°micamente
            </tbody>
          </table>-->
        </div>

        <!-- Categor√≠as -->
        <div
          class="tab-pane fade"
          id="categorias"
          role="tabpanel"
          aria-labelledby="categorias-tab"
        >
          <h2>Configuraci√≥n de Categor√≠as</h2>

          <!-- Bot√≥n para agregar una categor√≠a -->
          <button class="btn btn-primary mb-3" id="btn-agregar-categoria">
            <i class="fas fa-plus-circle me-1"></i>Agregar Categor√≠a
          </button>

          <!-- Modal para agregar/editar categor√≠a -->
          <div
            class="modal fade"
            id="categoriaModal"
            tabindex="-1"
            aria-labelledby="categoriaModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="categoriaModalLabel">
                    Agregar Categor√≠a
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <form id="form-categoria">
                    <div class="mb-3">
                      <label for="categoria-nombre" class="form-label"
                        >Nombre de la Categor√≠a</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="categoria-nombre"
                        required
                      />
                    </div>
                    <button type="submit" class="btn btn-success">
                      Guardar Categor√≠a
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Contenedor para los botones de eliminar y editar categoria -->
          <div class="button-container">
            <!-- Bot√≥n de eliminar (bote de basura) -->
            <div id="delete-category-btn" class="button-delete">
              <i class="fa-solid fa-trash"></i>
            </div>
            <!-- Bot√≥n de actualizar cantidad (l√°piz) -->
            <div id="edit-category-btn" class="button-edit">
              <i class="fa-regular fa-pen-to-square"></i>
            </div>
          </div>
          <span class="text-muted small"
            >Selecciona una categoria para ver acciones</span
          >
          <table class="table" id="tabla-categorias">
            <thead>
              <tr>
                <th>Orden</th>
                <th>Nombre</th>
              </tr>
            </thead>
            <tbody id="categorias-container">
              <!-- Aqu√≠ se cargar√°n din√°micamente las categor√≠as -->
            </tbody>
          </table>
          <!-- Modal de confirmaci√≥n para eliminar (a√±adir al final del body) -->
          <div
            class="modal fade"
            id="deleteCategoryModal"
            tabindex="-1"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Confirmar Eliminaci√≥n</h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <!-- El contenido se llena din√°micamente -->
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Cancelar
                  </button>
                  <button
                    type="button"
                    class="btn btn-danger"
                    id="confirm-delete-btn-categoria"
                  >
                    Eliminar
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Promociones Tab -->
        <div
          class="tab-pane fade"
          id="promo-recommendations"
          role="tabpanel"
          aria-labelledby="promotion-recommendations"
        >
          <div class="container mt-4">
            <!-- Botones superiores -->
            <div class="d-flex justify-content-between mb-4">
              <!--  <button
                class="btn btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#sugerenciaModal"
              >
                <i class="fas fa-lightbulb me-2"></i>Crear Sugerencia
              </button>-->
              <button
                class="btn btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#promocionModal"
              >
                <i class="fas fa-tag me-2"></i>Crear Promoci√≥n
              </button>
            </div>

            <!-- Listado de promociones activas -->
            <div class="card">
              <div class="card-header table-card-title">
                <h3 class="mb-0">Promociones Activas</h3>
              </div>
              <div class="card-body">
                <span class="text-muted small"
                  >Selecciona una promoci√≥n para ver acciones</span
                >
                <ul id="promociones-activas" class="list-group">
                  <!-- Aqui aparecen de forma dinamica las promociones-->
                </ul>
              </div>
            </div>
          </div>
          <!-- üîç Modal Detalles de Promoci√≥n -->
          <div
            class="modal fade"
            id="detallePromocionModal"
            tabindex="-1"
            aria-labelledby="detallePromocionLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content rounded-4 shadow-lg">
                <div class="modal-header rounded-top-4">
                  <h5 class="modal-title" id="detallePromocionLabel">
                    <i class="fas fa-tag me-2"></i>Detalles de la Promoci√≥n
                  </h5>
                  <button
                    type="button"
                    class="btn-close btn-close-white"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body p-4">
                  <div class="row g-4">
                    <!-- Imagen -->
                    <div class="col-md-4 text-center">
                      <img
                        id="detalle-promo-imagen"
                        src="#"
                        alt="Imagen de promoci√≥n"
                        class="img-fluid rounded shadow-sm border border-light-subtle"
                      />
                    </div>

                    <!-- Info principal -->
                    <div class="col-md-8">
                      <h4 id="detalle-promo-nombre" class="fw-bold mb-2"></h4>
                      <span
                        id="detalle-promo-tipo"
                        class="badge rounded-pill px-3 py-2 mb-3"
                      ></span>
                      <p class="mb-1">
                        <i class="fas fa-calendar-day me-2 text-muted"></i>
                        <strong>Inicio:</strong>
                        <span id="detalle-promo-fechas-inicio"></span>
                      </p>
                      <p class="mb-1">
                        <i class="fas fa-calendar-day me-2 text-muted"></i>
                        <strong>Fin:</strong>
                        <span id="detalle-promo-fechas-fin"></span>
                      </p>
                      <p class="mb-1">
                        <i class="fas fa-cogs me-2 text-muted"></i
                        ><strong>Condiciones:</strong>
                        <span id="detalle-promo-condiciones"></span>
                      </p>
                      <p class="mb-0">
                        <i class="fas fa-boxes me-2 text-muted"></i>
                        <strong>Productos:</strong>
                        <span id="detalle-promo-productos"></span>
                      </p>
                    </div>
                  </div>
                </div>
                <div class="modal-footer justify-content-between px-4 py-3">
                  <button
                    class="btn btn-outline-danger"
                    id="btn-eliminar-promocion"
                  >
                    <i class="fas fa-trash me-2"></i>Eliminar
                  </button>
                  <button
                    class="btn btn-outline-primary"
                    id="btn-editar-promocion"
                  >
                    <i class="fas fa-pen-to-square me-2"></i>Editar
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal para Crear Promoci√≥n -->
          <div
            class="modal fade"
            id="promocionModal"
            tabindex="-1"
            aria-labelledby="promocionModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="promocionModalLabel">
                    Crear Nueva Promoci√≥n
                  </h5>
                  <button
                    type="button"
                    class="btn-close btn-close-white"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <form id="create-promotion-form">
                    <div class="mb-3">
                      <label for="promotion-name" class="form-label"
                        >Nombre de la Promoci√≥n</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="promotion-name"
                        placeholder="Ejemplo: Descuento de Verano"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="promotion-image" class="form-label"
                        >Imagen de la Promoci√≥n</label
                      >
                      <input
                        type="file"
                        class="form-control"
                        id="promotion-image"
                        accept="image/*"
                      />
                      <small class="text-muted"
                        >Formatos aceptados: JPG, PNG, GIF (M√°x. 2MB)</small
                      >
                      <div class="mt-2">
                        <img
                          id="promotion-image-preview"
                          src="#"
                          alt="Vista previa de imagen"
                          class="preview-image"
                        />
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="promotion-discount-type" class="form-label"
                        >Tipo de Descuento</label
                      >
                      <select
                        class="form-select"
                        id="promotion-discount-type"
                        onchange="updateDiscountOptions()"
                        required
                      >
                        <option value="" disabled selected>
                          Selecciona el tipo de descuento
                        </option>
                        <option value="percentage">
                          Porcentaje global a toda la tienda
                        </option>
                        <option value="products">
                          Porcentaje a productos seleccionados
                        </option>
                        <option value="buy-get">
                          Compra tal y ll√©vate tal
                        </option>
                        <option value="bogo">2x1</option>
                        <option value="threshold">
                          Porcentaje de descuento en compras mayores
                        </option>
                      </select>
                    </div>
                    <div class="mb-3 row">
                      <div class="col-sm-6 mb-2 mb-sm-0">
                        <label for="promotion-inicio" class="form-label"
                          >Fecha de Inicio</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="promotion-inicio"
                        />
                      </div>
                      <div class="col-sm-6">
                        <label for="promotion-fin" class="form-label"
                          >Fecha de Fin</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="promotion-fin"
                        />
                      </div>
                    </div>
                    <!-- Configuracionesde descuentos  -->
                    <div id="discount-configurations">
                      <!-- Secci√≥n de porcentaje de descuento -->
                      <div
                        id="percentage-config"
                        class="discount-option d-none"
                      >
                        <label for="percentage-value" class="form-label"
                          >Porcentaje de Descuento (%)</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="percentage-value"
                          placeholder="Ejemplo: 20"
                        />
                      </div>
                      <!-- Productos a seleccionar si el tipo es "percentage-products" -->
                      <div id="products-config" class="discount-option d-none">
                        <label for="products-value" class="form-label"
                          >Porcentaje de Descuento (%)</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="products-value"
                          placeholder="Ejemplo: 20"
                        />
                        <label
                          for="promotion-percentage-products"
                          class="form-label"
                          >Productos Seleccionados</label
                        >
                        <select
                          multiple
                          class="form-select"
                          id="promotion-percentage-products"
                        >
                          <!-- Productos se cargar√°n din√°micamente aqu√≠ -->
                        </select>
                        <small class="text-muted"
                          >Mant√©n presionado Ctrl (o Cmd en Mac) para
                          seleccionar m√∫ltiples productos</small
                        >
                      </div>
                      <div id="buy-get-config" class="discount-option d-none">
                        <label for="buy-quantity" class="form-label"
                          >Cantidad a Comprar</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="buy-quantity"
                          placeholder="Ejemplo: 3"
                        />
                        <label for="get-quantity" class="form-label mt-2"
                          >Cantidad a Llevar Gratis</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="get-quantity"
                          placeholder="Ejemplo: 1"
                        />
                        <label for="promotion-products-buy" class="form-label"
                          >Productos a comprar</label
                        >
                        <select
                          multiple
                          class="form-select"
                          id="promotion-products-buy"
                        >
                          <!-- Productos se cargar√°n din√°micamente aqu√≠ -->
                        </select>
                        <small class="text-muted"
                          >Mant√©n presionado Ctrl (o Cmd en Mac) para
                          seleccionar m√∫ltiples productos</small
                        >
                        <div>
                          <label
                            for="promotion-products-free"
                            class="form-label"
                            >Productos de regalo</label
                          >
                          <select
                            multiple
                            class="form-select"
                            id="promotion-products-free"
                          >
                            <!-- Productos se cargar√°n din√°micamente aqu√≠ -->
                          </select>
                          <small class="text-muted"
                            >Mant√©n presionado Ctrl (o Cmd en Mac) para
                            seleccionar m√∫ltiples productos</small
                          >
                        </div>
                      </div>

                      <div id="bogo-config" class="discount-option d-none">
                        <div id="products-list-promotion" class="mb-3">
                          <label for="promotion-products" class="form-label"
                            >Productos</label
                          >
                          <select
                            multiple
                            class="form-select"
                            id="promotion-products"
                          >
                            <option value="1">Dona de Chocolate</option>
                            <option value="2">Concha de Vainilla</option>
                            <option value="3">Bolillo</option>
                            <option value="4">Pastel de Tres Leches</option>
                          </select>
                          <small class="text-muted"
                            >Mant√©n presionado Ctrl (o Cmd en Mac) para
                            seleccionar m√∫ltiples</small
                          >
                        </div>
                        <p class="form-text">
                          La promoci√≥n se aplicar√° autom√°ticamente al a√±adir
                          productos id√©nticos al carrito.
                        </p>
                      </div>

                      <div id="threshold-config" class="discount-option d-none">
                        <label for="threshold-value" class="form-label"
                          >Monto M√≠nimo de Compra</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="threshold-value"
                          placeholder="Ejemplo: 100"
                        />
                        <label
                          for="threshold-percentage"
                          class="form-label mt-2"
                          >Porcentaje de Descuento (%)</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="threshold-percentage"
                          placeholder="Ejemplo: 15"
                        />
                      </div>
                    </div>
                    <div class="text-end">
                      <button
                        type="button"
                        class="btn btn-secondary me-2"
                        data-bs-dismiss="modal"
                      >
                        Cancelar
                      </button>
                      <button
                        type="submit"
                        class="btn btn-success"
                        id="btn-save-promotion"
                      >
                        Crear Promoci√≥n
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal de Confirmaci√≥n de Eliminaci√≥n de Promoci√≥n -->
          <div
            class="modal fade"
            id="confirmarEliminarModal"
            tabindex="-1"
            aria-labelledby="confirmarEliminarLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content rounded-4 shadow">
                <div class="modal-header bg-danger text-white rounded-top-4">
                  <h5 class="modal-title" id="confirmarEliminarLabel">
                    <i class="fas fa-trash-alt me-2"></i>Eliminar Promoci√≥n
                  </h5>
                  <button
                    type="button"
                    class="btn-close btn-close-white"
                    data-bs-dismiss="modal"
                    aria-label="Cerrar"
                  ></button>
                </div>
                <div class="modal-body">
                  <p class="text-center mb-0">
                    <i
                      class="fa-solid fa-circle-exclamation fa-2x text-danger mb-3"
                    ></i
                    ><br />
                    ¬øEst√°s seguro de que deseas eliminar esta promoci√≥n?<br />
                    <strong id="nombre-promo-a-eliminar"></strong>
                  </p>
                </div>
                <div class="modal-footer justify-content-between px-4 py-3">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    <i class="fas fa-times me-2"></i>Cancelar
                  </button>
                  <button
                    type="button"
                    class="btn btn-danger"
                    id="confirmar-eliminar-btn"
                  >
                    <i class="fas fa-check-circle me-2"></i>Eliminar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Modal para Crear Sugerencia -->
          <div
            class="modal fade"
            id="sugerenciaModal"
            tabindex="-1"
            aria-labelledby="sugerenciaModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="sugerenciaModalLabel">
                    Crear Nueva Sugerencia
                  </h5>
                  <button
                    type="button"
                    class="btn-close btn-close-white"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <form id="sugerencia-form">
                    <div class="mb-3">
                      <label for="sugerencia-descripcion" class="form-label"
                        >Descripci√≥n de la Sugerencia</label
                      >
                      <textarea
                        class="form-control"
                        id="sugerencia-descripcion"
                        rows="3"
                        required
                      ></textarea>
                    </div>
                    <div class="mb-3">
                      <label for="sugerencia-tipo" class="form-label"
                        >Tipo de Promoci√≥n</label
                      >
                      <select class="form-select" id="sugerencia-tipo" required>
                        <option value="" disabled selected>
                          Selecciona un tipo
                        </option>
                        <option value="bogo">2x1</option>
                        <option value="descuento">Descuento</option>
                        <option value="combo">Combo</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label for="sugerencia-productos" class="form-label"
                        >Productos Relacionados</label
                      >
                      <select
                        multiple
                        class="form-select"
                        id="sugerencia-productos"
                      >
                        <option value="1">Dona de Chocolate</option>
                        <option value="2">Concha de Vainilla</option>
                        <option value="3">Bolillo</option>
                        <option value="4">Pastel de Tres Leches</option>
                      </select>
                      <small class="text-muted"
                        >Mant√©n presionado Ctrl (o Cmd en Mac) para seleccionar
                        m√∫ltiples</small
                      >
                    </div>
                    <div class="text-end">
                      <button
                        type="button"
                        class="btn btn-secondary me-2"
                        data-bs-dismiss="modal"
                      >
                        Cancelar
                      </button>
                      <button type="submit" class="btn btn-primary">
                        Guardar Sugerencia
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Secci√≥n de Inventario -->
        <div
          class="tab-pane fade"
          id="inventario"
          role="tabpanel"
          aria-labelledby="inventario-tab"
        >
          <div class="container py-4">
            <h2 class="mb-4">Gesti√≥n de Inventario</h2>

            <!-- Tabs internas -->
            <ul class="nav nav-tabs mb-4" id="inventoryTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="ingredientes-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#ingredientes"
                  type="button"
                  role="tab"
                >
                  <i class="fa-solid fa-clipboard-list"></i> Ingredientes
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="productos-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#productos"
                  type="button"
                  role="tab"
                >
                  <i class="fa-solid fa-bread-slice"></i> Productos
                </button>
              </li>
            </ul>
            <!-- Contenido de cada tab -->
            <div class="tab-content" id="inventoryTabsContent">
              <!-- TAb Ingredientes-->
              <div
                class="tab-pane fade show active"
                id="ingredientes"
                role="tabpanel"
              >
                <div
                  class="d-flex justify-content-between align-items-center mb-3"
                >
                  <h4>
                    <i class="fa-solid fa-clipboard-list"></i> Inventario de
                    Ingredientes
                  </h4>
                  <button
                    class="btn btn-success rounded-pill fw-semibold shadow-sm gap-2"
                    id="btn-agregar-ingrediente-inventario"
                  >
                    <i class="fas fa-plus-circle me-2"></i>Ingrediente
                  </button>
                </div>
                <!-- Filtros Ingredientes -->
                <div class="d-flex flex-wrap align-items-end gap-3 mb-3">
                  <!-- Buscar -->
                  <div class="flex-fill">
                    <label for="buscarIngrediente" class="form-label">
                      <i class="fas fa-search me-1"></i>Buscar
                    </label>
                    <input
                      type="text"
                      id="buscarIngrediente"
                      class="form-control"
                      placeholder="Ej. Az√∫car, Leche..."
                    />
                  </div>

                  <!-- Unidad -->
                  <div class="flex-fill">
                    <label for="filtroUnidad" class="form-label">
                      <i class="fas fa-weight-hanging me-1"></i>Medida
                    </label>
                    <select id="filtroUnidad" class="form-select">
                      <option value="">Todas</option>
                      <option value="kg">Kilogramos</option>
                      <option value="lt">Litros</option>
                      <option value="pz">Piezas</option>
                    </select>
                  </div>

                  <!-- Orden por Nombre -->
                  <div class="flex-fill">
                    <label for="ordenarNombreIngrediente2" class="form-label">
                      <i class="fas fa-sort-alpha-down me-1"></i>Nombre
                    </label>
                    <select id="ordenarNombreIngrediente2" class="form-select">
                      <option value="az">A - Z</option>
                      <option value="za">Z - A</option>
                    </select>
                  </div>

                  <!-- Bot√≥n limpiar filtros -->
                  <div>
                    <button
                      id="btn-limpiar-filtros-ing"
                      class="btn btn-outline-secondary disabled"
                      disabled
                    >
                      <i class="fas fa-eraser me-1"></i> Limpiar Filtros
                    </button>
                  </div>
                </div>
                <!-- Badges -->
                <div id="filtros-activos-ing" class="mb-3 d-none">
                  <span class="me-2">Filtros activos:</span>
                  <span
                    id="badge-medida"
                    class="badge rounded-pill bg-secondary d-none"
                  >
                    Medida: <span class="fw-bold"></span>
                  </span>
                  <span
                    id="badge-nombre-orden"
                    class="badge rounded-pill bg-secondary d-none"
                  >
                    Nombre: <span class="fw-bold"></span>
                  </span>
                </div>
                <!-- Tabla Stock ingredientes-->
                <div class="table-responsive">
                  <!-- Acciones al seleccionar ingrediente -->
                  <div
                    id="ingrediente-actions"
                    class="d-flex justify-content-end mb-3"
                  >
                    <button
                      class="btn btn-primary me-2"
                      id="btn-historial-ingrediente"
                    >
                      <i class="fas fa-history"></i> Historial
                    </button>
                    <button
                      class="btn btn-primary"
                      id="btn-restar-ingrediente-inventario"
                    >
                      <i class="fas fa-minus-circle me-2"></i>Ingrediente
                    </button>
                  </div>
                  <span class="text-muted small"
                    >Selecciona un ingrediente para ver acciones</span
                  >
                  <div class="card border-0 shadow-sm rounded-4">
                    <div class="card-body p-0">
                      <table
                        class="table table-hover table-borderless align-middle text-center mb-0"
                      >
                        <thead class="table-card-title">
                          <tr>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-tag"></i> Nombre
                              </div>
                            </th>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-boxes"></i> Stock actual
                              </div>
                            </th>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-weight"></i> Medida
                              </div>
                            </th>

                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-dollar-sign"></i> Precio total
                              </div>
                            </th>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-ruler-combined"></i> Precio
                                unitario
                              </div>
                            </th>
                            <!--      <th><i class="fas fa-history"></i> Historial</th>
                        <th><i class="fas fa-cogs"></i> Acciones</th>-->
                          </tr>
                        </thead>
                        <tbody id="tabla-ingredientes">
                          <!-- JS renderiza aqu√≠ -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <!-- Modal de entrada de ingrediente -->
                <div
                  class="modal fade"
                  id="modalEntradaIngrediente"
                  tabindex="-1"
                  aria-labelledby="modalEntradaLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="modalEntradaLabel">
                          <i class="fas fa-plus-circle me-2"></i>Registrar
                          Entrada de Ingrediente
                        </h5>
                        <button
                          type="button"
                          class="btn-close"
                          data-bs-dismiss="modal"
                          aria-label="Cerrar"
                        ></button>
                      </div>

                      <form id="form-entrada-ingrediente">
                        <div class="modal-body">
                          <!-- Ingrediente -->
                          <div class="mb-3">
                            <label for="ingrediente-select" class="form-label"
                              >Ingrediente</label
                            >
                            <select
                              id="ingrediente-select"
                              class="form-select"
                              required
                            >
                              <option value="" disabled selected>
                                Selecciona un ingrediente...
                              </option>
                              <!-- opciones se llenan din√°micamente -->
                            </select>
                          </div>

                          <!-- Cantidad -->
                          <div class="mb-3">
                            <label for="cantidad-entrada" class="form-label"
                              >Cantidad a ingresar</label
                            >
                            <div class="input-group">
                              <input
                                type="number"
                                class="form-control"
                                id="cantidad-entrada"
                                min="0.01"
                                step="0.01"
                                required
                              />
                              <span
                                class="input-group-text"
                                id="unidad-medida-text"
                                >-</span
                              >
                              <!-- Aqu√≠ se mostrar√° la unidad -->
                            </div>
                          </div>
                          <!-- Stock actual -->
                          <div
                            class="mb-3 text-muted"
                            id="stock-actual-text"
                            style="display: none"
                          >
                            <i class="fas fa-boxes-stacked me-1"></i>
                            Stock actual: <span id="stock-actual-num">-</span>
                          </div>
                          <!-- Precio unitario -->
                          <div
                            class="mb-3 text-muted"
                            id="precio-unitario-text"
                            style="display: none"
                          >
                            <i class="fas fa-dollar-sign me-1"></i>
                            Precio unitario:
                            <span id="precio-unitario-num">-</span>
                          </div>

                          <!-- Observaciones -->
                          <div class="mb-3">
                            <label for="comentario-entrada" class="form-label"
                              >Observaciones (opcional)</label
                            >
                            <textarea
                              id="comentario-entrada"
                              class="form-control"
                              rows="2"
                              placeholder="Ej. compra semanal, ajuste de stock..."
                            ></textarea>
                          </div>
                        </div>

                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            <i class="fas fa-times"></i> Cancelar
                          </button>
                          <button type="submit" class="btn btn-success">
                            <i class="fas fa-check-circle"></i> Registrar
                            Entrada
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <!-- Modal para registrar salida manualmente de ingrediente-->
                <div
                  class="modal fade"
                  id="modalSalidaIngrediente"
                  tabindex="-1"
                  aria-labelledby="modalSalidaLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <form id="form-salida-ingrediente">
                        <div class="modal-header">
                          <h5 class="modal-title" id="modalSalidaLabel">
                            <i class="fas fa-minus-circle me-2"></i>Registrar
                            Salida de Ingrediente
                          </h5>
                          <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Cerrar"
                          ></button>
                        </div>

                        <div class="modal-body">
                          <!-- Nombre y medida (solo info) -->
                          <p>
                            <strong
                              ><i class="fa-solid fa-bread-slice"></i>
                              Ingrediente:</strong
                            >
                            <span id="nombre-ingrediente-salida">-</span>
                          </p>
                          <p>
                            <strong><i class="fas fa-boxes"></i> Stock:</strong>
                            <span id="stock-actual-salida">-</span>
                          </p>

                          <!-- Cantidad a descontar -->
                          <div class="mb-3">
                            <label for="cantidad-salida" class="form-label"
                              >Cantidad a retirar (<span
                                id="medida-retirar"
                              ></span
                              >):</label
                            >
                            <input
                              type="number"
                              class="form-control"
                              id="cantidad-salida"
                              min="0.01"
                              step="0.01"
                              required
                            />
                          </div>

                          <!-- Motivo u observaci√≥n -->
                          <div class="mb-3">
                            <label for="comentario-salida" class="form-label"
                              >Motivo / Observaci√≥n</label
                            >
                            <textarea
                              class="form-control"
                              id="comentario-salida"
                              rows="2"
                              placeholder="Ej. p√©rdida, merma, error..."
                            ></textarea>
                          </div>
                        </div>

                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            <i class="fas fa-times"></i> Cancelar
                          </button>
                          <button type="submit" class="btn btn-danger">
                            <i class="fas fa-check-circle"></i> Registrar Salida
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <!--Historial-->
                <!-- üî≥ Overlay difuminado detr√°s del panel -->
                <div id="overlay-historial" class="overlay-historial"></div>
                <!-- üìú Historial lateral -->
                <div id="historial-contenedor" class="historial-sidebar">
                  <div
                    class="historial-header d-flex justify-content-between align-items-center p-3 border-bottom"
                  >
                    <h5 class="mb-0">
                      <i class="fas fa-history me-2"></i>Historial
                    </h5>
                    <button
                      id="btn-cerrar-historial"
                      class="btn btn-sm btn-outline-danger"
                    >
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                  <div class="historial-body p-3">
                    <p id="titulo-historial" class="fw-bold"></p>
                    <p
                      id="resumen-historial-ingrediente"
                      class="small text-muted mb-2"
                    ></p>
                    <ul id="lista-historial" class="list-group small">
                      <!-- Los movimientos se renderizan aqu√≠ -->
                    </ul>
                  </div>
                </div>
              </div>
              <!-- TAB PRODUCTOS -->
              <div class="tab-pane fade" id="productos" role="tabpanel">
                <div
                  class="d-flex justify-content-between align-items-center mb-3"
                >
                  <h4>
                    <i class="fa-solid fa-bread-slice"></i> Inventario de
                    Productos
                  </h4>
                  <button
                    class="btn btn-success rounded-pill fw-semibold shadow-sm gap-2"
                    id="btn-agregar-producto-inventario"
                  >
                    <i class="fas fa-circle-plus fa-lg"></i>
                    Registrar producci√≥n
                  </button>
                </div>
                <!-- Filtros -->
                <div class="d-flex flex-wrap align-items-end gap-3 mb-3">
                  <!-- Buscar -->
                  <div class="flex-fill">
                    <label for="buscarProducto" class="form-label">
                      <i class="fas fa-search me-1"></i>Buscar
                    </label>
                    <input
                      type="text"
                      id="buscarProducto"
                      class="form-control"
                      placeholder="Ej. Donas, Pan..."
                    />
                  </div>

                  <!-- Categor√≠a -->
                  <div class="flex-fill">
                    <label for="filtroCategoria" class="form-label">
                      <i class="fas fa-tags me-1"></i>Categor√≠a
                    </label>
                    <select id="filtroCategoria" class="form-select">
                      <option value="">Todas</option>
                      <option value="Pan dulce">Pan dulce</option>
                      <option value="Pan de sal">Pan de sal</option>
                    </select>
                  </div>

                  <!-- Ordenar por Stock -->
                  <div class="flex-fill">
                    <label for="ordenarStock" class="form-label">
                      <i class="fas fa-sort-numeric-down-alt me-1"></i>Stock
                    </label>
                    <select id="ordenarStock" class="form-select">
                      <option value="desc">Mayor a menor</option>
                      <option value="asc">Menor a mayor</option>
                    </select>
                  </div>

                  <!-- Ordenar por Nombre -->
                  <div class="flex-fill">
                    <label for="ordenarNombre" class="form-label">
                      <i class="fas fa-sort-alpha-down me-1"></i>Nombre
                    </label>
                    <select id="ordenarNombre" class="form-select">
                      <option value="az">A - Z</option>
                      <option value="za">Z - A</option>
                    </select>
                  </div>
                  <!-- Limpiar Filtros -->
                  <div>
                    <button
                      id="btn-limpiar-filtros"
                      class="btn btn-outline-secondary disabled"
                      disabled
                    >
                      <i class="fas fa-eraser me-1"></i> Limpiar Filtros
                    </button>
                  </div>
                </div>
                <!-- Badges de filtros activos -->
                <div id="filtros-activos" class="mb-3">
                  <span class="me-2">Filtros activos:</span>
                  <span
                    id="badge-categoria"
                    class="badge rounded-pill bg-secondary d-none"
                  >
                    Categor√≠a: <span class="fw-bold"></span>
                  </span>
                  <span
                    id="badge-stock"
                    class="badge rounded-pill bg-secondary d-none"
                  >
                    Stock: <span class="fw-bold"></span>
                  </span>
                  <span
                    id="badge-nombre"
                    class="badge rounded-pill bg-secondary d-none"
                  >
                    Nombre: <span class="fw-bold"></span>
                  </span>
                </div>

                <!-- Tabla -->
                <div class="table-responsive">
                  <!-- Acciones al seleccionar producto -->
                  <div
                    id="producto-actions"
                    class="d-flex justify-content-end mb-3"
                  >
                    <button
                      class="btn btn-primary me-2"
                      id="btn-historial-producto"
                    >
                      <i class="fas fa-history"></i> Historial
                    </button>
                    <button
                      class="btn btn-primary"
                      id="btn-restar-producto-inventario"
                    >
                      <i class="fa-solid fa-minus"></i> Ajuste/Salida
                    </button>
                  </div>
                  <span class="text-muted small"
                    >Selecciona un producto para ver acciones</span
                  >

                  <div class="card border-0 shadow-sm rounded-4">
                    <div class="card-body p-0">
                      <table
                        class="table table-hover table-borderless align-middle text-center mb-0"
                      >
                        <thead class="table-card-title">
                          <tr>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fa-solid fa-layer-group"></i>
                                Categoria
                              </div>
                            </th>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-tag"></i> Nombre
                              </div>
                            </th>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-boxes"></i> Stock actual
                              </div>
                            </th>
                            <!--   <th><i class="fas fa-box-open"></i> Unidades</th>-->
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-ruler-combined"></i> Costo
                                unitario
                              </div>
                            </th>
                            <th>
                              <div
                                class="d-flex align-items-center justify-content-center gap-2"
                              >
                                <i class="fas fa-dollar-sign"></i> Costo total
                              </div>
                            </th>
                          </tr>
                        </thead>
                        <tbody id="tabla-productos">
                          <!-- JS renderiza aqu√≠ -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <!-- Modal Registrar producto -->
                <div
                  class="modal fade"
                  id="modalEntradaProducto"
                  tabindex="-1"
                  aria-labelledby="modalEntradaProductoLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <form id="form-entrada-producto">
                        <div class="modal-header">
                          <h5 class="modal-title">
                            <i class="fa-solid fa-plus-circle me-2"></i
                            >Registrar producci√≥n
                          </h5>
                          <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Cerrar"
                          ></button>
                        </div>

                        <div class="modal-body">
                          <!-- Producto -->
                          <div class="mb-3">
                            <label for="producto-select" class="form-label"
                              >Producto</label
                            >
                            <select
                              id="producto-select"
                              class="form-select"
                              required
                            >
                              <option value="" disabled selected>
                                Selecciona un producto...
                              </option>
                              <!-- Opciones din√°micas -->
                            </select>
                          </div>

                          <!-- Cantidad a producir -->
                          <div class="mb-3">
                            <label for="cantidad-producto" class="form-label"
                              >Cantidad producida</label
                            >
                            <input
                              type="number"
                              class="form-control"
                              id="cantidad-producto"
                              min="1"
                              step="1"
                              required
                            />
                          </div>

                          <!-- Resumen de ingredientes requeridos -->
                          <div
                            class="alert alert-info small"
                            id="ingredientes-requeridos"
                            style="display: none"
                          >
                            <strong>Ingredientes necesarios:</strong>
                            <ul id="lista-ingredientes-requeridos" class="mb-0">
                              <!-- Render desde JS -->
                            </ul>
                          </div>

                          <!-- Observaciones -->
                          <div class="mb-3">
                            <label
                              for="comentario-produccion"
                              class="form-label"
                              >Observaciones</label
                            >
                            <textarea
                              class="form-control"
                              id="comentario-produccion"
                              rows="2"
                              placeholder="Ej. Producci√≥n semanal, lote especial..."
                            ></textarea>
                          </div>
                        </div>

                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            <i class="fas fa-times"></i> Cancelar
                          </button>
                          <button
                            type="submit"
                            class="btn btn-success"
                            id="btn-registrar-produccion"
                          >
                            <i class="fas fa-check-circle"></i> Registrar
                            Producci√≥n
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                <!-- Modal de salida de producto -->
                <div
                  class="modal fade"
                  id="modalSalidaProducto"
                  tabindex="-1"
                  aria-labelledby="modalSalidaProductoLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <form id="form-salida-producto">
                        <div class="modal-header">
                          <h5 class="modal-title" id="modalSalidaProductoLabel">
                            <i class="fa-solid fa-minus-circle me-2"></i
                            >Registrar Salida de Producto
                          </h5>
                          <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Cerrar"
                          ></button>
                        </div>
                        <div class="modal-body">
                          <!-- Info del producto -->
                          <p>
                            <strong
                              ><i class="fa-solid fa-bread-slice"></i>
                              Producto:</strong
                            >
                            <span id="nombre-producto-salida">-</span>
                          </p>
                          <p>
                            <strong><i class="fas fa-boxes"></i> Stock:</strong>
                            <span id="stock-actual-producto">-</span>
                          </p>

                          <!-- Cantidad a retirar -->
                          <div class="mb-3">
                            <label
                              for="cantidad-salida-producto"
                              class="form-label"
                              >Cantidad a retirar</label
                            >
                            <input
                              type="number"
                              class="form-control"
                              id="cantidad-salida-producto"
                              min="1"
                              step="1"
                              required
                            />
                          </div>

                          <!-- Observaci√≥n -->
                          <div class="mb-3">
                            <label
                              for="comentario-salida-producto"
                              class="form-label"
                              >Motivo / Observaci√≥n</label
                            >
                            <textarea
                              class="form-control"
                              id="comentario-salida-producto"
                              rows="2"
                              placeholder="Ej. vendido, mermas..."
                            ></textarea>
                          </div>
                        </div>
                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            <i class="fas fa-times"></i> Cancelar
                          </button>
                          <button type="submit" class="btn btn-danger">
                            <i class="fas fa-check-circle"></i> Registrar Salida
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                <!-- üî≥ Overlay difuminado detr√°s del panel -->
                <div
                  id="overlay-historial-producto"
                  class="overlay-historial"
                ></div>

                <!-- üìú Historial lateral para productos -->
                <div
                  id="historial-contenedor-producto"
                  class="historial-sidebar"
                >
                  <div
                    class="historial-header d-flex justify-content-between align-items-center p-3 border-bottom"
                  >
                    <h5 class="mb-0">
                      <i class="fas fa-history me-2"></i>Historial
                    </h5>
                    <button
                      id="btn-cerrar-historial-producto"
                      class="btn btn-sm btn-outline-danger"
                    >
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                  <div class="historial-body p-3">
                    <p id="titulo-historial-producto" class="fw-bold"></p>
                    <p
                      id="resumen-historial-producto"
                      class="small text-muted mb-2"
                    ></p>
                    <ul id="lista-historial-producto" class="list-group small">
                      <!-- Los movimientos se renderizan aqu√≠ -->
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Estad√≠sticas de Ventas -->
        <div
          class="tab-pane fade"
          id="sales-stats-content"
          role="tabpanel"
          aria-labelledby="sales-stats-tab"
        >
          <h2>Estad√≠sticas de Ventas</h2>
          <div class="row">
            <!-- Filtros -->
            <div class="col-md-4 mb-3">
              <div class="filters">
                <label for="stats-period">Periodo:</label>
                <select id="stats-period" class="form-control">
                  <option value="daily">Diario</option>
                  <option value="weekly">Semanal</option>
                  <option value="monthly">Mensual</option>
                </select>
              </div>
            </div>

            <!-- Res√∫menes R√°pidos -->
            <div class="col-md-8 mb-3">
              <div class="row">
                <div class="col-sm-4">
                  <div class="stat-card">
                    <h5>Total Ventas</h5>
                    <p id="total-sales">$0</p>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="stat-card">
                    <h5>Ventas Promedio</h5>
                    <p id="avg-sales">$0</p>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="stat-card">
                    <h5>Cambio % Ventas</h5>
                    <p id="sales-change">+0%</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Gr√°fico de Ventas -->
          <canvas id="sales-chart" width="400" height="200"></canvas>
        </div>

        <!-- Configuraciones -->
        <div
          class="tab-pane fade"
          id="settings"
          role="tabpanel"
          aria-labelledby="settings-tab"
        >
          <h2>Personalizaci√≥n del Sitio</h2>
          <form>
            <div class="form-section">
              <label for="site-name">Nombre del Sitio:</label>
              <input
                type="text"
                id="site-name"
                class="form-control"
                placeholder="Nombre de la p√°gina"
              />
            </div>
            <div class="form-section">
              <label for="site-logo">Logo del Sitio:</label>
              <input type="file" id="site-logo" class="form-control" />
            </div>
            <div class="form-section">
              <label for="primary-color">Color Primario:</label>
              <input type="color" id="primary-color" value="#6c1b2d" />
            </div>
            <button type="submit" class="btn btn-primary">
              Guardar Configuraci√≥n
            </button>
          </form>
        </div>
      </div>
    </div>

    <footer>
      <p id="footer-company-name"></p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Toastify JS -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Importa tinycolor2 desde un CDN -->
    <script src="https://cdn.jsdelivr.net/npm/tinycolor2@1.4.2/dist/tinycolor-min.js"></script>

    <script type="module" src="../js/admin.js"></script>
  </body>
</html>
